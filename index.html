<!DOCTYPE html>
<html>

<body>

	<!-- <audio id="myAudio" controls autoplay>
		<source src="https://freesound.org/data/previews/316/316847_4939433-lq.mp3" type="audio/ogg">
		<source src="https://freesound.org/data/previews/316/316847_4939433-lq.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio> -->

	<!-- <p>Click the button to find out if the audio automatically started to play as soon as it was ready.</p>

	<button onclick="myFunction()">Try it</button> -->

	<p id="demo"></p>

	<!-- <script>
		
		function myFunction() {
			var x = document.getElementById("myAudio").autoplay;
			document.getElementById("demo").innerHTML = x;

		}
	</script> -->

</body>


<script>
	window.addEventListener('load', () => {
		// noinspection JSUnresolvedVariable
		let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
		let xhr = new XMLHttpRequest();
		xhr.open('GET', '/sounds/no-sound(1).mp3');
		xhr.responseType = 'arraybuffer';
		xhr.addEventListener('load', () => {
			let playsound = (audioBuffer) => {
				let source = audioCtx.createBufferSource();
				source.buffer = audioBuffer;
				source.connect(audioCtx.destination);
				source.loop = false;
				source.start();

				console.log(source)

				setTimeout(function () {
					playsound(audioBuffer);
				}, 1000 + Math.random() * 2500);
			};

			audioCtx.decodeAudioData(xhr.response).then(playsound);
		});
		xhr.send();
	});
</script>

</html>